<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1100" height="540" viewBox="0 0 1100 540" role="img" aria-labelledby="title desc">
  <title id="title">Topic pattern matching diagram</title>
  <desc id="desc">Diagram illustrating exact matches, single-level (+) wildcard, and multi-level (#) wildcard pattern matching against published topics.</desc>

  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#475569" />
    </marker>
    <filter id="softShadow" x="-50%" y="-50%" width="200%" height="200%">
      <feDropShadow dx="0" dy="6" stdDeviation="8" flood-color="#000" flood-opacity="0.12"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="100%" height="100%" fill="#fff" />

  <!-- Title -->
  <text x="40" y="36" font-family="Inter, Roboto, Arial" font-size="20" font-weight="700" fill="#0F172A">Topic pattern matching</text>
  <text x="40" y="58" font-family="Inter, Roboto, Arial" font-size="12" fill="#475569">Examples: exact, single-level (+), multi-level (#)</text>

  <!-- Left column: Patterns -->
  <g transform="translate(40,110)">
    <text x="0" y="0" font-family="Inter, Roboto, Arial" font-size="14" fill="#0F172A" font-weight="700">Patterns (subscriptions)</text>

    <!-- Pattern 1: exact -->
    <g transform="translate(0,28)">
      <rect x="0" y="0" rx="8" ry="8" width="260" height="54" fill="#F1F5F9" stroke="#E2E8F0" />
      <text x="18" y="32" font-family="Inter, Roboto, Arial" font-size="14" fill="#0B1220">cart.item.add</text>
      <text x="18" y="46" font-family="Inter, Roboto, Arial" font-size="11" fill="#475569">Exact match</text>
    </g>

    <!-- Pattern 2: single-level -->
    <g transform="translate(0,96)">
      <rect x="0" y="0" rx="8" ry="8" width="260" height="54" fill="#FEF3C7" stroke="#FDE68A" />
      <text x="18" y="32" font-family="Inter, Roboto, Arial" font-size="14" fill="#92400E">cart.+.add</text>
      <text x="18" y="46" font-family="Inter, Roboto, Arial" font-size="11" fill="#92400E">Single-level (+)</text>
    </g>

    <!-- Pattern 3: multi-level -->
    <g transform="translate(0,164)">
      <rect x="0" y="0" rx="8" ry="8" width="260" height="54" fill="#ECFCCB" stroke="#86EFAC" />
      <text x="18" y="32" font-family="Inter, Roboto, Arial" font-size="14" fill="#065F46">cart.#</text>
      <text x="18" y="46" font-family="Inter, Roboto, Arial" font-size="11" fill="#065F46">Multi-level (#)</text>
    </g>

    <!-- Pattern 4: user profile + -->
    <g transform="translate(0,232)">
      <rect x="0" y="0" rx="8" ry="8" width="260" height="54" fill="#EEF2FF" stroke="#C7D2FE" />
      <text x="18" y="32" font-family="Inter, Roboto, Arial" font-size="14" fill="#3730A3">user.profile.+</text>
      <text x="18" y="46" font-family="Inter, Roboto, Arial" font-size="11" fill="#3730A3">Single-level for user profiles</text>
    </g>
  </g>

  <!-- Center column: Published topics -->
  <g transform="translate(400,90)">
    <text x="0" y="0" font-family="Inter, Roboto, Arial" font-size="14" fill="#0F172A" font-weight="700">Published topics</text>

    <!-- Topic 1 -->
    <g transform="translate(0,28)">
      <rect x="0" y="0" rx="8" ry="8" width="320" height="44" fill="#ffffff" stroke="#E6EEF4" />
      <text x="18" y="28" font-family="Inter, Roboto, Arial" font-size="13" fill="#0F172A">cart.item.add</text>
    </g>

    <!-- Topic 2 -->
    <g transform="translate(0,86)">
      <rect x="0" y="0" rx="8" ry="8" width="320" height="44" fill="#ffffff" stroke="#E6EEF4" />
      <text x="18" y="28" font-family="Inter, Roboto, Arial" font-size="13" fill="#0F172A">cart.promo.add</text>
    </g>

    <!-- Topic 3 -->
    <g transform="translate(0,144)">
      <rect x="0" y="0" rx="8" ry="8" width="320" height="44" fill="#ffffff" stroke="#E6EEF4" />
      <text x="18" y="28" font-family="Inter, Roboto, Arial" font-size="13" fill="#0F172A">cart.item.detail.add</text>
    </g>

    <!-- Topic 4 -->
    <g transform="translate(0,202)">
      <rect x="0" y="0" rx="8" ry="8" width="320" height="44" fill="#ffffff" stroke="#E6EEF4" />
      <text x="18" y="28" font-family="Inter, Roboto, Arial" font-size="13" fill="#0F172A">user.profile.update</text>
    </g>
  </g>

  <!-- Right column: Match legend and results -->
  <g transform="translate(740,90)">
    <text x="0" y="0" font-family="Inter, Roboto, Arial" font-size="14" fill="#0F172A" font-weight="700">Matches</text>

    <!-- Result rows -->
    <g transform="translate(0,28)">
      <rect x="0" y="0" rx="8" ry="8" width="320" height="40" fill="#ECFDF5" stroke="#34D399" />
      <text x="18" y="26" font-family="Inter, Roboto, Arial" font-size="12" fill="#065F46">Match: cart.item.add → cart.item.add (exact)</text>
    </g>
    <g transform="translate(0,76)">
      <rect x="0" y="0" rx="8" ry="8" width="320" height="40" fill="#FFFBEB" stroke="#F59E0B" />
      <text x="18" y="26" font-family="Inter, Roboto, Arial" font-size="12" fill="#92400E">Match: cart.+.add → cart.item.add, cart.promo.add (single-level)</text>
    </g>
    <g transform="translate(0,124)">
      <rect x="0" y="0" rx="8" ry="8" width="320" height="40" fill="#ECFCCB" stroke="#84CC16" />
      <text x="18" y="26" font-family="Inter, Roboto, Arial" font-size="12" fill="#065F46">Match: cart.# → cart.item.add, cart.promo.add, cart.item.detail.add (multi-level)</text>
    </g>
    <g transform="translate(0,172)">
      <rect x="0" y="0" rx="8" ry="8" width="320" height="40" fill="#EEF2FF" stroke="#A78BFA" />
      <text x="18" y="26" font-family="Inter, Roboto, Arial" font-size="12" fill="#3730A3">Match: user.profile.+ → user.profile.update (single-level)</text>
    </g>
  </g>

  <!-- Lines: draw connections from patterns to topics -->
  <g stroke-linecap="round" stroke-width="3" fill="none">
    <!-- cart.item.add (pattern exact) -> cart.item.add (topic) -->
    <path d="M 300 154 C 380 120 380 120 400 120" stroke="#10B981" marker-end="url(#arrow)" />

    <!-- cart.+.add -> cart.item.add (match) -->
    <path d="M 300 212 C 340 200 390 170 410 154" stroke="#F59E0B" marker-end="url(#arrow)" />
    <!-- cart.+.add -> cart.promo.add (match) -->
    <path d="M 300 215 C 330 200 330 200 400 200" stroke="#F59E0B" marker-end="url(#arrow)" />

    <!-- cart.# -> cart.item.add -->
    <path d="M 300 290 C 360 200 360 180 390 160" stroke="#84CC16" marker-end="url(#arrow)" />
    <!-- cart.# -> cart.promo.add -->
    <path d="M 300 290 C 270 300 380 220 400 210" stroke="#84CC16" marker-end="url(#arrow)" />
    <!-- cart.# -> cart.item.detail.add -->
    <path d="M 300 290 C 340 280 400 260 400 260" stroke="#84CC16" marker-end="url(#arrow)" />

    <!-- user.profile.+ -> user.profile.update -->
    <path d="M 300 362 C 380 330 390 320 400 310" stroke="#7C3AED" marker-end="url(#arrow)" />
  </g>

  <!-- Legend -->
  <g transform="translate(40,420)">
    <text x="0" y="0" font-family="Inter, Roboto, Arial" font-size="13" fill="#0F172A" font-weight="700">Legend</text>
    <g transform="translate(0,12)">
      <rect x="0" y="12" width="14" height="8" fill="#10B981" />
      <text x="22" y="20" font-family="Inter, Roboto, Arial" font-size="12" fill="#475569">Exact match</text>

      <rect x="220" y="12" width="14" height="8" fill="#F59E0B" />
      <text x="246" y="20" font-family="Inter, Roboto, Arial" font-size="12" fill="#475569">Single-level (+)</text>

      <rect x="460" y="12" width="14" height="8" fill="#84CC16" />
      <text x="486" y="20" font-family="Inter, Roboto, Arial" font-size="12" fill="#475569">Multi-level (#)</text>

      <rect x="700" y="12" width="14" height="8" fill="#7C3AED" />
      <text x="726" y="20" font-family="Inter, Roboto, Arial" font-size="12" fill="#475569">Profile single-level</text>
    </g>
  </g>

  <!-- Footer -->
  <text x="40" y="515" font-family="Inter, Roboto, Arial" font-size="12" fill="#475569">Tip: Use `+` to match a single segment and `#` to match multiple segments at any depth.</text>

</svg>